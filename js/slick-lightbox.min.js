"use strict";(function(b){var a,c;a=function(){function d(f,g){var e;this.options=g;this.$element=b(f);this.didInit=false;e=this;this.$element.on("click.slickLightbox",this.options.itemSelector,function(h){var j,i;h.preventDefault();j=b(this);j.blur();if(typeof e.options.shouldOpen==="function"){if(!e.options.shouldOpen(e,j,h)){return}}i=e.filterOutSlickClones(e.$element.find(e.options.itemSelector));return e.init(i.index(j))})}d.prototype.init=function(e){this.didInit=true;this.detectIE();this.createModal();this.bindEvents();this.initSlick(e);return this.open()};d.prototype.createModalItems=function(){var j,i,h,g,f,e;g=this.options.lazyPlaceholder||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";h=function(n,k,l){var m;if(l===true){m=' data-lazy="'+n+'" src="'+g+'" '}else{m=' src="'+n+'" '}return'<div class="slick-lightbox-slick-item">\n  <div class="slick-lightbox-slick-item-inner">\n    <img class="slick-lightbox-slick-img" '+m+" />\n    "+k+"\n  </div>\n</div>"};if(this.options.images){e=b.map(this.options.images,function(k){return h(k,this.options.lazy)})}else{j=this.filterOutSlickClones(this.$element.find(this.options.itemSelector));f=j.length;i=function(k){return function(n,m){var l,o,p;o={index:m,length:f};l=k.getElementCaption(n,o);p=k.getElementSrc(n);return h(p,l,k.options.lazy)}}(this);e=b.map(j,i)}return e};d.prototype.createModal=function(){var f,e;e=this.createModalItems();f='<div class="slick-lightbox slick-lightbox-hide-init'+(this.isIE?" slick-lightbox-ie":"")+'" style="background: '+this.options.background+';">\n  <div class="slick-lightbox-inner">\n    <div class="slick-lightbox-slick slick-caption-'+this.options.captionPosition+'">'+e.join("")+"</div>\n  <div>\n<div>";this.$modalElement=b(f);this.$parts={};this.$parts.closeButton=b(this.options.layouts.closeButton);this.$modalElement.find(".slick-lightbox-inner").append(this.$parts.closeButton);return b("body").append(this.$modalElement)};d.prototype.initSlick=function(f){var e;e={initialSlide:f};if(this.options.lazy){e.lazyLoad="ondemand"}if(this.options.slick!=null){if(typeof this.options.slick==="function"){this.slick=this.options.slick(this.$modalElement)}else{this.slick=this.$modalElement.find(".slick-lightbox-slick").slick(b.extend({},this.options.slick,e))}}else{this.slick=this.$modalElement.find(".slick-lightbox-slick").slick(e)}return this.$modalElement.trigger("init.slickLightbox")};d.prototype.open=function(){if(this.options.useHistoryApi){this.writeHistory()}this.$element.trigger("show.slickLightbox");setTimeout(function(e){return function(){return e.$element.trigger("shown.slickLightbox")}}(this),this.getTransitionDuration());return this.$modalElement.removeClass("slick-lightbox-hide-init")};d.prototype.close=function(){this.$element.trigger("hide.slickLightbox");setTimeout(function(e){return function(){return e.$element.trigger("hidden.slickLightbox")}}(this),this.getTransitionDuration());this.$modalElement.addClass("slick-lightbox-hide");return this.destroy()};d.prototype.bindEvents=function(){var e;e=function(f){return function(){var g;g=f.$modalElement.find(".slick-lightbox-inner").height();f.$modalElement.find(".slick-lightbox-slick-item").height(g);return f.$modalElement.find(".slick-lightbox-slick-img, .slick-lightbox-slick-item-inner").css("max-height",Math.round(f.options.imageMaxHeight*g))}}(this);b(window).on("orientationchange.slickLightbox resize.slickLightbox",e);if(this.options.useHistoryApi){b(window).on("popstate.slickLightbox",function(f){return function(){return f.close()}}(this))}this.$modalElement.on("init.slickLightbox",e);this.$modalElement.on("destroy.slickLightbox",function(f){return function(){return f.destroy()}}(this));this.$element.on("destroy.slickLightbox",function(f){return function(){return f.destroy(true)}}(this));this.$parts.closeButton.on("click.slickLightbox touchstart.slickLightbox",function(f){return function(g){g.preventDefault();return f.close()}}(this));if(this.options.closeOnEscape||this.options.navigateByKeyboard){b(document).on("keydown.slickLightbox",function(f){return function(h){var g;g=h.keyCode?h.keyCode:h.which;if(f.options.navigateByKeyboard){if(g===37){f.slideSlick("left")}else{if(g===39){f.slideSlick("right")}}}if(f.options.closeOnEscape){if(g===27){return f.close()}}}}(this))}if(this.options.closeOnBackdropClick){this.$modalElement.on("click.slickLightbox touchstart.slickLightbox",".slick-lightbox-slick-img",function(f){return f.stopPropagation()});return this.$modalElement.on("click.slickLightbox",".slick-lightbox-slick-item",function(f){return function(g){g.preventDefault();return f.close()}}(this))}};d.prototype.slideSlick=function(e){if(e==="left"){return this.slick.slick("slickPrev")}else{return this.slick.slick("slickNext")}};d.prototype.detectIE=function(){var e;this.isIE=false;if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){e=new Number(RegExp.$1);if(e<9){return this.isIE=true}}};d.prototype.getElementCaption=function(e,f){var g;if(!this.options.caption){return""}g=function(){switch(typeof this.options.caption){case"function":return this.options.caption(e,f);case"string":return b(e).data(this.options.caption)}}.call(this);return'<span class="slick-lightbox-slick-caption">'+g+"</span>"};d.prototype.getElementSrc=function(e){switch(typeof this.options.src){case"function":return this.options.src(e);case"string":return b(e).attr(this.options.src);default:return e.href}};d.prototype.unbindEvents=function(){b(window).off(".slickLightbox");b(document).off(".slickLightbox");return this.$modalElement.off(".slickLightbox")};d.prototype.destroy=function(e){if(e==null){e=false}if(this.didInit){this.unbindEvents();setTimeout(function(f){return function(){return f.$modalElement.remove()}}(this),this.options.destroyTimeout)}if(e){this.$element.off(".slickLightbox");return this.$element.off(".slickLightbox",this.options.itemSelector)}};d.prototype.destroyPrevious=function(){return b("body").children(".slick-lightbox").trigger("destroy.slickLightbox")};d.prototype.getTransitionDuration=function(){var e;if(this.transitionDuration){return this.transitionDuration}e=this.$modalElement.css("transition-duration");if(typeof e==="undefined"){return this.transitionDuration=500}else{return this.transitionDuration=e.indexOf("ms")>-1?parseFloat(e):parseFloat(e)*1000}};d.prototype.writeHistory=function(){return typeof history!=="undefined"&&history!==null?typeof history.pushState==="function"?history.pushState(null,null,""):void 0:void 0};d.prototype.filterOutSlickClones=function(e){if(!this.$element.hasClass("slick-slider")){return e}return e=e.filter(function(){var f;f=b(this);return !f.hasClass("slick-cloned")&&f.parents(".slick-cloned").length===0})};return d}();c={background:"rgba(0,0,0,.8)",closeOnEscape:true,closeOnBackdropClick:true,destroyTimeout:500,itemSelector:"a",navigateByKeyboard:true,src:false,caption:false,captionPosition:"dynamic",images:false,slick:{},useHistoryApi:false,layouts:{closeButton:'<button type="button" class="slick-lightbox-close"></button>'},shouldOpen:null,imageMaxHeight:0.9,lazy:false};b.fn.slickLightbox=function(d){d=b.extend({},c,d);b(this).each(function(){return this.slickLightbox=new a(this,d)});return this};b.fn.unslickLightbox=function(){return b(this).trigger("destroy.slickLightbox").each(function(){return this.slickLightbox=null})}}(jQuery));